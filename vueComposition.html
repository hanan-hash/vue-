<html></html>
    <head>
        <title>First Class Html class</title>
        
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="vue.css">
  <script src="vue.js"></script>
  <script>
    //vue work//
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'blue': {
                   DEFAULT: '#3B82F6',
                     50: '#D5E4FD',
                    100: '#C4D9FC',
                    200: '#A1C3FB',
                    300: '#7FAEF9',
                    400: '#5D98F8',
                    500: '#3B82F6',
                    600: '#0B61EE',
                    700: '#084BB8',
                    800: '#063583',
                    900: '#041F4D',
                    950: '#021532',
            },
                    'vista-blue': {
                    DEFAULT: '#96D9A6',
                    50: '#96D9A6',
                    100: '#96D9AB',
                    200: '#96D9B6',
                    300: '#96D9C2',
                    400: '#96D9CD',
                    500: '#96D9D8',
                    600: '#96CFD9',
                    700: '#96C4D9',
                    800: '#96B9D9',
                    900: '#96AED9',
                    950: '#96A8D9'
                    }, 
                    'blue-chalk': {
                    DEFAULT: '#F8E5FF',
                    50: '#F8E5FF',
                    100: '#FAE5FF',
                    200: '#FEE5FF',
                    300: '#FFE5FC',
                    400: '#FFE5F7',
                    500: '#FFE5F3',
                    600: '#FFE5EF',
                    700: '#FFE5EB',
                    800: '#FFE5E6',
                    900: '#FFE9E5',
                    950: '#FFEBE5'
                    },
                        'pale-sky': {
                    DEFAULT: '#6B7280',
                    50: '#E3E5E8',
                    100: '#D8DADF',
                    200: '#C2C5CC',
                    300: '#ACB0BA',
                    400: '#969BA7',
                    500: '#7F8694',
                    600: '#6B7280',
                    700: '#515761',
                    800: '#383C43',
                    900: '#1E2024',
                    950: '#121315'
            },

                    'pale-sky': {
                    DEFAULT: '#6B7280',
                    50: '#E3E5E8',
                    100: '#D8DADF',
                    200: '#C2C5CC',
                    300: '#ACB0BA',
                    400: '#969BA7',
                    500: '#7F8694',
                    600: '#6B7280',
                    700: '#515761',
                    800: '#383C43',
                    900: '#1E2024',
                    950: '#121315'
                    },

                    'slate-gray': {
                    DEFAULT: '#6C7993',
                    50: '#F9FBFB',
                    100: '#EDF2F2',
                    200: '#DFE6E7',
                    300: '#C7D1D6',
                    400: '#A1ADBA',
                    500: '#818CA2',
                    600: '#686E8D',
                    700: '#4E4E6A',
                    800: '#323041',
                    900: '#18161D',
                    950: '#0C0B0F'
                    },

                 'dodger-blue': {
                DEFAULT: '#3B82F6',
                50: '#A9BAFB',
                100: '#9DB2FA',
                200: '#84A3F9',
                300: '#6C96F8',
                400: '#538BF7',
                500: '#3B82F6',
                600: '#0B6AEE',
                700: '#0859B8',
                800: '#064483',
                900: '#042B4D',
                950: '#021D32'
                },


            }           
          }
        } 
      }
  </script>
    </head>


    <body class="bg-dodger-blue-400 flex flex-col text-dodger-blue-900 h-svh">
        <div class="bg-dodger-blue-600 p-3 ">
            <h1 class="text--950 text-6xl">Hello Bhai!</h1>
        </div>
        <div id='container' class="flex grow flex-column">
            <div class="w-100 box-border p-8 bg bg-dodger-blue-500 ;">
                <h1 class="pale-sky-500 text-6xl">Sidebar</h1>
            </div>
            <div id='mainBox' class='flex-1 flex gap-10p-6 bg-dodger-blue-100'>
                <div class=' bg-dodger-blue-300 grid-item slideDown' style='width: 30%;'>
                    <form id='taskForm' onsubmit='event.preventDefault();' style='display: flex; flex-direction:column; gap: 4px;'>
                      <label>Checkout Form</label>
                      <input type='text' name='first_name' required id='first_name' placeholder="Enter you first_name"/>
                      <span style='color:red;' hidden id='taskErrorField-first_name'>This field is required</span>
                      <input type='text' name='last_name' required id='last_name' placeholder="Enter you last_name"/>
                      <span style='color:red;' hidden id='taskErrorField-last_name'>This field is required</span>
                      <input type='tel' name='number' required id='number' placeholder="Enter you phone_number"/>
                      <span style='color:red;' hidden id='taskErrorField-number'>This field is required</span>
                      <textarea id="address" name="address" placeholder="enter your full address"></textarea>
                      <span style='color:red;' hidden id='taskErrorField-address'>This field is required</span>
                      <input type='text' name='email' required id='email' placeholder="Enter you email"/>
                      <span style='color:red;' hidden id='taskErrorField-email'>This field is required</span>
                      <input type='text' name='postal_code' required id='postal_code' placeholder="Enter you postal_code"/>
                      <span style='color:red;' hidden id='taskErrorField-postal_code'>This field is required</span>
                      <select id="city" name="city">
                    <option selected>Karachi</option>
                    <option >Lahore</option>
                    <option >Islamabed</option>
                    <option >Peshawar</option>
                    <option >Queta</option>
                  </select>
                  <span style='color:red;' hidden id='taskErrorField-city'>This field is required</span>
                  <select id="country" name="country">
                    <option selected>Pakistan</option>
                  </select>
                  <span style='color:red;' hidden id='taskErrorField-country'>This field is required</span>
                  <div>
                      <label class="paymentLabel">
                          <input type='radio' name='task' required id='payment_method' checked placeholder="Enter you payment_method"/>
                          Cash on Delivery
                      </label>
                      <label class="paymentLabel">
                        <input type='radio' name='task' required id='payment_method' placeholder="Enter you payment_method"/>
                        Online Payment
                    </label>
                  </div>
                  <button type='button' onclick="sumbitCheckout()" id='submitBtn' class='submitBtn' style='background-color: black; color: white; padding: 10px; border: none; border-radius: 5px;'>Checkout</button>
                </form>
                <div>
                  <label>Cart Details</label>
                  <div id="boxList"  style="width: 80%; display: flex; flex-direction: column; gap: 4px;" class="grid-item slideDown">
                    <p>{{ x.name }}</p>
                    <div class='text-dodger-blue-300' v-if="x.discount_price  x.price">
                        <span class='textdodger-blue-500 line-through' :data-id="x.id">{{x.price}}
                        </span>
                        {{x.discounted_price}}
                    </div>
                    <div class='text-dodger-blue' v-else>{{x.price}}</div>
                    <div>{{'Quantity '+x.quantity}}</div>
                    <button class="text-red-500" @click="removeItemCart(x.id)">X</button>
 
                  </div>
                </div>
            </div>
            <div id='main'>
 
            </div>
        </div>
      </body>
    <script>
      const { createApp, ref, onMounted, dateFormat, computed  } = Vue;

createApp({
  setup() {
    const message = ref("Hello vue!");
    const initialCheckoutForm = {
      first_name: "",
      last_name: "",
      phone_number: 0,
      address: "",
      email: "",
      postal_code: "",
      city: "",
      country: "",
      payment_method: "",
      shipping_details: {
        address: "",
        city: "",
        postal_code: "",
        country: "",
        phone_number: "",
        reciever_name: "",
      },
      total_amount: "",
      cart_details: [],
    };
    const checkoutForm = ref({
      first_name: "",
      last_name: "",
      phone_number: 0,
      address: "",
      email: "",
      postal_code: "",
      city: "",
      country: "",
      payment_method: "",
      shipping_details: {
        address: "",
        city: "",
        postal_code: "",
        country: "",
        phone_number: "",
        reciever_name: "",
      },
      total_amount: "",
      cart_details: [],
    });
    const products = [
      {
        id: 1,
        name: "water bottle",
        description: "color: blue size: large",
        price: 100,
        discounted_price: 99,
      },
      {
        id: 2,
        name: "mouse",
        description: "wired usb port",
        price: 250,
        discounted_price: 199,
      },
      {
        id: 3,
        name: "watch",
        description: "color: black, watch type: smart, brand: apple",
        price: 5000,
        discounted_price: 4999,
      },
      {
        id: 4,
        name: "infinix s23",
        description: "color blue, storage: 120gb ram: 2gb display: 6x4",
        price: 25000,
        discounted_price: 24999,
      },
      {
        id: 5,
        name: "shoes",
        description: "size: 8, color blue, type: sports wear",
        price: 3000,
        discounted_price: 3000,
      },
    ];


    onMounted(()=>{
      alert("let see");
    });

    const computedTotalCart = computed(() => {
      var total = checkoutForm.value.cart_details.reduce((accumulator, currentValue) => {
        var currentPrice = currentValue.discounted_price < currentValue.price ? currentValue.discounted_price : currentValue.price
        return accumulator + currentPrice * currentValue.quantity
      }, 0);
      return total;
    });

    const validateFields = () => {
      var basicFields = [
        "first_name",
        "last_name",
        "address",
        "postal_code",
      ];
      const basicValidation = () => {
        var checkValidation = true;
        basicFields.forEach((x) => {
          if (
            checkoutForm.value[x] == "" ||
            checkoutForm.value[x] == null
          ) {
            checkValidation = false;
            document.getElementById("taskErrorField-" + x).hidden = false;
          } else {
            document.getElementById("taskErrorField-" + x).hidden = true;
          }
        });
        return checkValidation;
      };
      var testBasicValidation = basicValidation();
      if (!testBasicValidation) {
        return false;
      }
      const validatePhoneNumber = (phoneNumber) => {
        const regex = /^(\+92|92|033|03)[ -]*\d{3}[ -]*\d{7}$/;
        return regex.test(phoneNumber);
      };
      if (!validatePhoneNumber(checkoutForm.value.phone_number)) {
        document.getElementById("taskErrorField-number").hidden = false;
        return false;
      } else {
        document.getElementById("taskErrorField-number").hidden = true;
      }
      const validateEmail = (email) => {
        const regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        return regex.test(email);
      };
      if (!validateEmail(checkoutForm.value.email)) {
        document.getElementById("taskErrorField-email").hidden = false;
        return false;
      } else {
        document.getElementById("taskErrorField-email").hidden = true;
      }
      if (checkoutForm.value.cart_details.length == 0) {
        alert("Please add items in your cart first");
        return false;
      }
      return true;
    };

    const sumbitCheckout = () => {
      const checkForm = validateFields();
      if (checkForm) {
        alert("Thank you for shopping with us");
        checkoutForm.value = { ...initialCheckoutForm };
        checkoutForm.value.cart_details = [];
        document.getElementById("ecommerceForm").reset();
      }
    };

    const addToCart = (product) => {
      debugger;
      var currentProduct = products.find((x) => {
        return x.id == product;
      });
      // ternary operator
      //   var ternaryOpt = 5 > 10 || 5 < 10 ? 5 : 10;
      var currentQty =
        document.getElementById("qty" + product).value == "" ||
        document.getElementById("qty" + product).value == null
          ? 1
          : document.getElementById("qty" + product).value;
      cartExistIndex = checkoutForm.value.cart_details.findIndex((x) => {
        return x.id == product;
      });
      if (cartExistIndex != -1) {
        checkoutForm.value.cart_details[cartExistIndex].quantity +=
          parseInt(currentQty);
      } else {
        var cartItem = {
          ...currentProduct,
          quantity: currentQty,
        };

        checkoutForm.value.cart_details.push(cartItem);
      }
      document.getElementById("qty" + product).value = "";
    };

    function removeItemCart(id) {
      var proIndex = checkoutForm.value.cart_details.findIndex((x) => {
        return x.id == id;
      });
      checkoutForm.value.cart_details.splice(proIndex, 1);
    };


    const changesMsg = () => {
      message.value = "I am change now";
    };

    return {
      message,
      initialCheckoutForm,
      checkoutForm,
      addToCart,
      removeItemCart,
      products,
      sumbitCheckout,
      computedTotalCart,
      changesMsg,
    };
  },
}).mount("#app");
</script>
</html>
